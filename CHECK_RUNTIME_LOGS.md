# 如何查看 Cloudflare Pages 運行時日誌

## 🔍 查看運行時日誌

根據您提供的截圖，您已經在查看運行時日誌。以下是詳細步驟：

### 步驟 1：訪問運行時日誌

1. 登入 [Cloudflare Dashboard](https://dash.cloudflare.com/)
2. 進入 **Pages** → 選擇 `global-constellation` 專案
3. 點擊 **Functions** 標籤
4. 點擊 **Real-time Logs (Beta)**

### 步驟 2：查看錯誤訊息

在運行時日誌中：

1. **過濾錯誤**：
   - 在 **Status** 下拉選單中選擇錯誤狀態
   - 或查看所有日誌

2. **查看詳細信息**：
   - 點擊失敗的請求（如果有）
   - 查看錯誤訊息和堆棧信息

3. **查看控制台輸出**：
   - 查找 `console.log` 和 `console.error` 輸出
   - 這些會顯示環境變數狀態和錯誤詳情

### 步驟 3：檢查特定請求

1. **過濾 `/keystatic` 請求**：
   - 在日誌中搜索 `/keystatic`
   - 查看該請求的狀態和錯誤訊息

2. **查看時間戳**：
   - 確認您查看的是最新的日誌
   - 日誌是實時的，會自動更新

## 📝 日誌中應該看到的內容

根據最新的代碼，您應該在日誌中看到：

1. **環境變數檢查日誌**：
   ```
   Keystatic 環境變數檢查: { owner: '已設置', repo: '已設置', token: '已設置' }
   ```

2. **初始化日誌**：
   ```
   開始初始化 Keystatic...
   Keystatic 頁面創建成功，開始處理請求...
   ```

3. **錯誤日誌**（如果有）：
   ```
   Keystatic 錯誤: [錯誤訊息]
   錯誤堆棧: [堆棧信息]
   ```

## 🔧 常見問題

### 問題 1：日誌中沒有錯誤訊息

**可能原因**：
- 錯誤發生在構建時，而不是運行時
- 錯誤被吞掉了

**解決方法**：
- 檢查構建日誌（在 Deployments 中）
- 查看瀏覽器控制台

### 問題 2：看到 "Ok" 狀態但還是 500 錯誤

**可能原因**：
- 響應狀態碼設置錯誤
- 響應格式問題

**解決方法**：
- 檢查響應頭
- 確認返回的是有效的 Response 對象

### 問題 3：環境變數顯示為 "未設置"

**可能原因**：
- 環境變數未正確設置
- 環境變數未應用於運行時

**解決方法**：
- 確認環境變數選擇了 **All environments**
- 重新部署

## 📋 檢查清單

在運行時日誌中確認：

- [ ] 看到環境變數檢查日誌
- [ ] 看到初始化日誌
- [ ] 如果有錯誤，看到錯誤訊息和堆棧
- [ ] 確認環境變數狀態（已設置/未設置）

## 🆘 如果仍然無法解決

請提供以下信息：

1. **運行時日誌截圖**（包含錯誤訊息）
2. **瀏覽器控制台錯誤**（F12 → Console）
3. **Network 標籤中的響應**（F12 → Network → 點擊請求 → Response）

---

**最後更新：2024年12月5日**

